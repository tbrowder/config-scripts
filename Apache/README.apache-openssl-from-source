Procedures for installing Apache2
=================================

NOTE:

The information in this directory applies specifically to installation
from source on a Debian 11 Bullsye amd64 host. Apache2 is not
well-documented and, while these instructions work for me, your
mileage may vary.

Pre-installation preparation:
----------------------------

Ensure you have the necessary Debian packages:

  as root execute bash script:
    $ sudo ./install-debian-bullsye-apache2-prereqs.sh

One more prerequisite is the Raku programming language. If you know
you have it, you are all set. Otherwise, you can install the Debian
package which contain the 'raku' executable:

    $ sudo apt install rakudo

Download and confirm the source packages (update links as required):

    $ ./download-apache2-and-prereqs.sh
    $ ./confirm-apache2-and-prereqs.sh

Unpack them into their own directory;

    $ ./unpack-archive-files

Steps for compiling the sources required:
-----------------------------------------

Compile and install in this order:

Stop the currently running httpd:
    sudo apachectl graceful-stop

Install openssl from source and install in:
    /opt/openssl-x.y.za

    NOTE: For some reason, httpd-2.4.+ configures to use any openssl lib
          in the /opt directory. Thus, until I can find out why and get
          help, as root, move away any installed openssl dirs.

    cd into the source directory
    use the local script:
    $ ../openssl-config-no-fips.sh x.y.z[o]
    # note you may have to add your openssl version if it's not there already
    $ make && make test && sudo make install

Install APR from source and install in:
    /usr/local   # default

    cd into the source directory
    use the local script:
    $ ../apr-config.sh go

Install APR-UTIL from source and install in:
    /usr/local   # default

WARNING: Ensure the OPENSSLDIR is set correctly

    cd into the source directory
    use the local script:
    $ ../apr-util-config.sh go

Install apache2 from source and install in:
    /usr/local/apache2 # default

    cd into the source directory
    use the local script:
    $ ../apache2-config-user-openssl.sh x.y.za
    # note you may have to add your openssl version if it's not there already
    make && sudo make install
    sudo su
    apachectl -k graceful stop
    apachectl -k start

Post installation:
-----------------
